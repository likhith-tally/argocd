# Example values.yaml : https://github.com/nats-io/k8s/blob/main/helm/charts/nats/values.yaml

config:
  cluster:
    enabled: true
    replicas: 3
  jetstream:
    enabled: true
    fileStore:
      pvc:
        size: 50Gi

# container:
#   image:
#     pullPolicy: IfNotPresent
#     fullImageName: "ocir.ap-mumbai-1.oci.oraclecloud.com/bmwva1xqkb3s/oss-images:nats-2.11.3-alpine"

podTemplate:
  patch:
    - op: add
      path: "/spec/nodeSelector"
      value:
        oke.oraclecloud.com/pool.name : nats
  topologySpreadConstraints:
    kubernetes.io/hostname:
      maxSkew: 1
      whenUnsatisfiable: DoNotSchedule

# reloader:
#   image:
#     pullPolicy: IfNotPresent
#     fullImageName: "ocir.ap-mumbai-1.oci.oraclecloud.com/bmwva1xqkb3s/oss-images:nats-server-config-reloader-0.17.2"

natsBox:
  enabled: true
  
  # container:
  #   image:
  #     pullPolicy: IfNotPresent
  #     fullImageName: "ocir.ap-mumbai-1.oci.oraclecloud.com/bmwva1xqkb3s/oss-images:nats-box-0.17.0"

  deployment:
    merge:
      spec:
        replicas: 1
 
  podTemplate:
    patch:
      - op: add
        path: "/spec/nodeSelector"
        value:
          oke.oraclecloud.com/pool.name : nats
      - op: add
        path: "/spec/topologySpreadConstraints"
        value:
        - maxSkew: 1
          topologyKey: kubernetes.io/hostname
          whenUnsatisfiable: DoNotSchedule
          labelSelector:
            matchLabels:
              app.kubernetes.io/component: nats-box
              app.kubernetes.io/instance: nats
              app.kubernetes.io/name: nats
